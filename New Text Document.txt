CREATE TABLE Fuentes (
    idFuente SERIAL PRIMARY KEY,
    nombre VARCHAR(60) NOT NULL
);

CREATE TABLE RedesSociales (
    idRedSocial SERIAL PRIMARY KEY,
    nombreUsuario VARCHAR(20) NOT NULL,
    url VARCHAR(50) NOT NULL
);

CREATE TABLE Roles (
    idRol SERIAL PRIMARY KEY,
    nombre VARCHAR(50) NOT NULL
);

CREATE TABLE Autores (
    idAutor SERIAL PRIMARY KEY,
    nombre VARCHAR(50) NOT NULL,
    apellido VARCHAR(50) NOT NULL,
    idRedSocial INT NULL,
    idRol INT NOT NULL,
    FOREIGN KEY (idRedSocial) REFERENCES RedesSociales(idRedSocial),
    FOREIGN KEY (idRol) REFERENCES Roles(idRol)
);

CREATE TABLE TiposContenidos (
    idTipoContenido SERIAL PRIMARY KEY,
    nombre VARCHAR(50) NOT NULL
);

CREATE TABLE ContenidosAudiovisuales (
    idContenidoAudiovisual SERIAL PRIMARY KEY,
    url VARCHAR(50) NOT NULL,
    fechaPublicacion DATE NULL,
    idTipoContenido INT NOT NULL,
    FOREIGN KEY (idTipoContenido) REFERENCES TiposContenidos(idTipoContenido)
);

CREATE TABLE Publicidades (
    idPublicidad SERIAL PRIMARY KEY,
    url VARCHAR(50) NOT NULL,
    mensaje VARCHAR(80) NOT NULL,
    idContenidoAudiovisual INT NOT NULL,
    FOREIGN KEY (idContenidoAudiovisual) REFERENCES ContenidosAudiovisuales(idContenidoAudiovisual)
);

CREATE TABLE Ciudades (
    idCiudad SERIAL PRIMARY KEY,
    nombre VARCHAR(50) NOT NULL
);

CREATE TABLE Usuarios (
    idUsuario SERIAL PRIMARY KEY,
    nombre VARCHAR(50) NOT NULL,
    apellido VARCHAR(50) NOT NULL,
    email VARCHAR(50) NOT NULL,
    contraseña VARCHAR(50) NOT NULL,
    numeroTelefono INT NOT NULL
);

CREATE TABLE Publicaciones (
    idPublicacion SERIAL PRIMARY KEY,
    titular VARCHAR(50) NOT NULL,
    cuerpo VARCHAR(400) NOT NULL,
    subtitulo VARCHAR(50) NULL,
    idFuente INT NULL,
    idAutor INT NOT NULL,
    idPublicidad INT NOT NULL,
    idCiudad INT NOT NULL,
    FOREIGN KEY (idFuente) REFERENCES Fuentes(idFuente),
    FOREIGN KEY (idAutor) REFERENCES Autores(idAutor),
    FOREIGN KEY (idCiudad) REFERENCES Ciudades(idCiudad)
);

CREATE TABLE ContenidosAudioVisualesPublicaciones (
    idPublicacion INT NOT NULL,
    idContenidoAudiovisual INT NOT NULL,
    PRIMARY KEY (idPublicacion, idContenidoAudiovisual),
    FOREIGN KEY (idPublicacion) REFERENCES Publicaciones(idPublicacion),
    FOREIGN KEY (idContenidoAudiovisual) REFERENCES ContenidosAudiovisuales(idContenidoAudiovisual)
);

CREATE TABLE Países (
    idPais SERIAL PRIMARY KEY,
    nombre VARCHAR(50) NOT NULL
);

CREATE TABLE DiariosInternacionales (
    idDiarioInternacional SERIAL PRIMARY KEY,
    nombre VARCHAR(50) NOT NULL,
    idPais INT NOT NULL,
    FOREIGN KEY (idPais) REFERENCES Países(idPais)
);

CREATE TABLE Visualizaciones (
    idVisualizacion SERIAL PRIMARY KEY,
    idDiarioInternacional INT NOT NULL,
    idUsuario INT NOT NULL,
    idPublicacion INT NOT NULL,
    FOREIGN KEY (idDiarioInternacional) REFERENCES DiariosInternacionales(idDiarioInternacional),
    FOREIGN KEY (idUsuario) REFERENCES Usuarios(idUsuario),
    FOREIGN KEY (idPublicacion) REFERENCES Publicaciones(idPublicacion)
);

CREATE TABLE Noticias (
    idNoticia SERIAL PRIMARY KEY,
    cantidadClics INT NOT NULL,
    idDiarioInternacional INT NOT NULL,
    FOREIGN KEY (idDiarioInternacional) REFERENCES DiariosInternacionales(idDiarioInternacional)
);

CREATE TABLE NoticiasGuardadas (
    idNoticia INT NOT NULL,
    idUsuario INT NOT NULL,
    fechaGuardado DATE NOT NULL,
    PRIMARY KEY (idNoticia, idUsuario),
    FOREIGN KEY (idUsuario) REFERENCES Usuarios(idUsuario),
    FOREIGN KEY (idNoticia) REFERENCES Noticias(idNoticia)
);

CREATE TABLE PalabrasClave (
    idPalabraClave SERIAL PRIMARY KEY,
    nombre VARCHAR(50) NOT NULL,
    descripción VARCHAR(200) NOT NULL 
);

CREATE TABLE EtiquetasNoticias (
    idNoticia INT NOT NULL,
    idPalabraClave INT NOT NULL,
    PRIMARY KEY (idNoticia, idPalabraClave),
    FOREIGN KEY (idNoticia) REFERENCES Noticias(idNoticia),
    FOREIGN KEY (idPalabraClave) REFERENCES PalabrasClave(idPalabraClave)
);

CREATE TABLE Secciones (
    idSección SERIAL PRIMARY KEY,
    nombre VARCHAR(50) NOT NULL
);

CREATE TABLE ClasificacionesNoticias (
    idNoticia INT NOT NULL,
    idSección INT NOT NULL,
    PRIMARY KEY (idNoticia, idSección),
    FOREIGN KEY (idNoticia) REFERENCES Noticias(idNoticia),
    FOREIGN KEY (idSección) REFERENCES Secciones(idSección)
);

CREATE TABLE NoticiasMásVistas (
    idNoticia INT PRIMARY KEY,
    FOREIGN KEY (idNoticia) REFERENCES Noticias(idNoticia)
);

CREATE TABLE Categorías (
    idCategoría SERIAL PRIMARY KEY,
    nombre VARCHAR(50) NOT NULL
);

CREATE TABLE Blogs (
    idBlog SERIAL PRIMARY KEY,
    idCategoría INT NOT NULL,
    FOREIGN KEY (idCategoría) REFERENCES Categorías(idCategoría)
);

CREATE TABLE TiposSuscripciones (
    idTipoSuscripción SERIAL PRIMARY KEY,
    nombre VARCHAR(50) NOT NULL,
    precio DECIMAL NOT NULL,
    descripción VARCHAR(100) NOT NULL
);

CREATE TABLE Suscripciones (
    idSuscripción SERIAL PRIMARY KEY,
    idTipoSuscripción INT NOT NULL, 
    precioPagado DECIMAL NOT NULL,
    fechaInicio DATE NOT NULL,
    fechaFin DATE NOT NULL,
    FOREIGN KEY (idTipoSuscripción) REFERENCES TiposSuscripciones(idTipoSuscripción)
);